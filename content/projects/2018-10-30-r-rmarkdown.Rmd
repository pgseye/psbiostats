---
title: "Predictors of SuperHuman Vision"
author: "Paul Sanfilippo"
date: 2018-10-30T21:13:14-05:00
description: "Under construction..."
categories: ["R"]
tags: ["regression", "plot"]
featured: true
image: "/img/super.png"
---

<style>
div.code pre { 
                font-family: 'Source Code Pro', 'Courier New', monospace;
                font-size: 12px;
                background-color:#F5F8FA;
                padding-top: 10px;
                padding-bottom: 10px;
                padding-left: 10px;
                border: 1px solid lightgrey;
                border-radius: 5px;
}
</style>

<style>
div.output pre { 
                font-family: 'Source Code Pro', 'Courier New', monospace;
                font-size: 12px;
                padding-top: 10px;
                padding-bottom: 10px;
                padding-left: 10px;
                border: 1px solid lightgrey;
                border-radius: 5px;
}
</style>


```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = F)
```

<br>

We wanted to model the relationship between various environmental, lifestyle, maternal, childhood and ophthalmic factors and best-corrected [visual acuity](https://en.wikipedia.org/wiki/Visual_acuity) (BCVA) in a young adult cohort. Data were available for 1252 patients.  

A secondary aim was to compare the predictive power of a classical modelling method (logistic regression) with a machine learning technique (penalised regression). An excellent overview of the differences can be found in this [Nature](https://www.nature.com/articles/nmeth.4642) paper.  

SuperHuman vision was defined as BCVA better than or equal to 6/5 vision (-0.1 logMAR) in at least one eye.  
*Note* - ‘Normal’ vision is considered equivalent to 0.00 logMAR (or 6/6 (20/20) on the Snellen scale more commonly utilised in clinical practice).  


### Descriptives

The basic frequency histogram for Left and Right eye data, constructed with ggplot2.

<div class = "code">
```{r hist, eval=F, tidy=F}
hist_va <-ggplot(data, aes(x = bcva, fill = bcva < -0.1)) +
  geom_histogram(color = "black",  binwidth = 0.05, center = 0.025) +
  scale_x_continuous(limits = c(-0.4, 0.4), breaks = seq(-0.4, 0.4, 0.1)) +
  theme(legend.position = "none") +
  xlab("Best Corrected Visual Acuity (logMAR)") +
  ylab("Frequency ") +
  scale_fill_manual(values = c("white", "red")) +
  facet_grid(. ~ eye)
```
</div>


Then overlaying the classification thresholds for SuperHuman vision.

<div class = "code">
```{r hist2, eval=F}
hist_va + 
  geom_vline(data = data, aes(xintercept = -0.097, color = "red"), linetype = "dashed") +
  geom_text(aes(-0.25, 420, label = "Superhuman Vision", color = "red"))
```
</div>

And we end up with:

<img src="/figs/svfig1.png" alt="png" width="800"/>

<br>

About **42%** of patients had SuperHuman vision under this definition.  



<br><br>

### Classical Modelling (Logistic Regression)



<br><br>

### Machine Learning (Penalised Regression)


